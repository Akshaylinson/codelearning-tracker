<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Progress Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                        dark: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'pulse-slow': 'pulse 3s infinite',
                        'bounce-in': 'bounceIn 0.6s ease-out'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        bounceIn: {
                            '0%': { transform: 'scale(0.3)', opacity: '0' },
                            '50%': { transform: 'scale(1.05)', opacity: '0.9' },
                            '100%': { transform: 'scale(1)', opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .dark-theme {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
        }
        .card-dark {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        .domain-card {
            transition: all 0.3s ease;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .domain-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.4);
            border-color: rgba(59, 130, 246, 0.3);
        }
        .progress-ring {
            transition: stroke-dashoffset 0.5s ease;
        }
        .day-cell {
            transition: all 0.2s ease;
        }
        .day-cell:hover {
            transform: scale(1.05);
        }
        .glow {
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.5);
        }
        .neon-text {
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.7);
        }
        .gradient-text {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>
<body class="dark-theme min-h-screen font-sans">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-12 animate-fade-in">
            <h1 class="text-4xl md:text-5xl font-bold mb-4 gradient-text">Learning Progress Tracker</h1>
            <p class="text-xl opacity-90">Track and optimize your learning journey across domains</p>
            <div class="mt-6 flex justify-center space-x-4">
                <div class="card-dark rounded-xl px-4 py-2">
                    <p class="text-sm">Current Week: <span id="current-week" class="font-bold text-primary-400"></span></p>
                </div>
                <div class="card-dark rounded-xl px-4 py-2">
                    <p class="text-sm">Today: <span id="current-date" class="font-bold text-primary-400"></span></p>
                </div>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column - Domains & Weekly Schedule -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Add Domain Section -->
                <section class="card-dark rounded-2xl p-6 animate-slide-up">
                    <h2 class="text-2xl font-bold mb-4 text-primary-300">Add Learning Domain</h2>
                    <div class="flex flex-col md:flex-row gap-4">
                        <input type="text" id="domain-name" placeholder="Enter domain name (e.g., Machine Learning)" 
                               class="flex-grow px-4 py-3 rounded-lg bg-dark-800 border border-dark-600 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-white placeholder-dark-400">
                        <button id="add-domain" class="px-6 py-3 bg-primary-600 hover:bg-primary-500 rounded-lg font-semibold transition-all duration-300 flex items-center justify-center gap-2">
                            <i class="fas fa-plus"></i> Add Domain
                        </button>
                    </div>
                </section>

                <!-- Weekly Schedule Section -->
                <section class="card-dark rounded-2xl p-6 animate-slide-up">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-primary-300">Weekly Schedule</h2>
                        <button id="reset-week" class="px-4 py-2 bg-red-700 hover:bg-red-600 rounded-lg transition-colors flex items-center gap-2">
                            <i class="fas fa-redo"></i> Reset Week
                        </button>
                    </div>
                    <div id="domains-container" class="space-y-4">
                        <!-- Domains will be dynamically added here -->
                    </div>
                </section>
            </div>

            <!-- Right Column - Progress Overview -->
            <div class="space-y-8">
                <!-- Today's Progress -->
                <section class="card-dark rounded-2xl p-6 animate-slide-up">
                    <h2 class="text-2xl font-bold mb-4 text-primary-300">Today's Progress</h2>
                    <div id="today-progress" class="space-y-4">
                        <!-- Today's domains will be dynamically added here -->
                    </div>
                </section>

                <!-- Progress Charts -->
                <section class="card-dark rounded-2xl p-6 animate-slide-up">
                    <h2 class="text-2xl font-bold mb-4 text-primary-300">Progress Overview</h2>
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-2 text-primary-200">Weekly Completion</h3>
                        <div class="h-64">
                            <canvas id="weekly-chart"></canvas>
                        </div>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-2 text-primary-200">Monthly Progress</h3>
                        <div class="h-64">
                            <canvas id="monthly-chart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-2 text-primary-200">Yearly Overview</h3>
                        <div class="h-64">
                            <canvas id="yearly-chart"></canvas>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script>
        // Data structure and initial state
        let learningData = {
            domains: [],
            schedule: {},
            completions: []
        };

        // DOM elements
        const domainsContainer = document.getElementById('domains-container');
        const todayProgress = document.getElementById('today-progress');
        const domainNameInput = document.getElementById('domain-name');
        const addDomainBtn = document.getElementById('add-domain');
        const resetWeekBtn = document.getElementById('reset-week');
        const currentWeekEl = document.getElementById('current-week');
        const currentDateEl = document.getElementById('current-date');

        // Chart instances
        let weeklyChart, monthlyChart, yearlyChart;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateDateDisplay();
            renderDomains();
            renderTodayProgress();
            initializeCharts();
            
            // Set up event listeners
            addDomainBtn.addEventListener('click', addDomain);
            resetWeekBtn.addEventListener('click', resetWeek);
            
            // Auto-save when leaving the page
            window.addEventListener('beforeunload', saveData);
        });

        // Date utilities
        function getCurrentWeek() {
            const now = new Date();
            const startOfYear = new Date(now.getFullYear(), 0, 1);
            const days = Math.floor((now - startOfYear) / (24 * 60 * 60 * 1000));
            return Math.ceil((days + startOfYear.getDay() + 1) / 7);
        }

        function getCurrentDay() {
            return new Date().toLocaleDateString('en-US', { weekday: 'long' });
        }

        function updateDateDisplay() {
            const now = new Date();
            currentWeekEl.textContent = `Week ${getCurrentWeek()}`;
            currentDateEl.textContent = now.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        // Data management
        function loadData() {
            const savedData = localStorage.getItem('learningTrackerData');
            if (savedData) {
                learningData = JSON.parse(savedData);
                
                // Check if we need to reset for a new week
                const currentWeek = getCurrentWeek();
                if (!learningData.currentWeek || learningData.currentWeek !== currentWeek) {
                    resetWeekData();
                    learningData.currentWeek = currentWeek;
                }
            } else {
                // Initialize with sample data for demonstration
                learningData = {
                    domains: [
                        { id: 1, name: 'Machine Learning', color: '#3b82f6' },
                        { id: 2, name: 'Web Development', color: '#10b981' },
                        { id: 3, name: 'Data Structures', color: '#f59e0b' }
                    ],
                    schedule: {
                        Monday: [1, 2],
                        Tuesday: [3],
                        Wednesday: [1],
                        Thursday: [2, 3],
                        Friday: [1],
                        Saturday: [2],
                        Sunday: [3]
                    },
                    completions: [],
                    currentWeek: getCurrentWeek()
                };
            }
        }

        function saveData() {
            localStorage.setItem('learningTrackerData', JSON.stringify(learningData));
        }

        function resetWeekData() {
            // Clear completions for the new week
            learningData.completions = learningData.completions.filter(
                completion => !completion.date.startsWith(getCurrentWeek())
            );
        }

        // Domain management
        function addDomain() {
            const name = domainNameInput.value.trim();
            if (!name) return;
            
            const newDomain = {
                id: Date.now(),
                name: name,
                color: getRandomColor()
            };
            
            learningData.domains.push(newDomain);
            domainNameInput.value = '';
            saveData();
            renderDomains();
            initializeCharts();
            
            // Add animation effect
            const newCard = domainsContainer.lastChild;
            newCard.classList.add('animate-bounce-in');
        }

        function getRandomColor() {
            const colors = [
                '#3b82f6', '#10b981', '#f59e0b', '#ef4444', 
                '#8b5cf6', '#06b6d4', '#84cc16', '#f97316'
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        function removeDomain(id) {
            learningData.domains = learningData.domains.filter(domain => domain.id !== id);
            
            // Remove from schedule
            for (const day in learningData.schedule) {
                learningData.schedule[day] = learningData.schedule[day].filter(domainId => domainId !== id);
            }
            
            // Remove completions
            learningData.completions = learningData.completions.filter(
                completion => completion.domainId !== id
            );
            
            saveData();
            renderDomains();
            renderTodayProgress();
            initializeCharts();
        }

        // Rendering functions
        function renderDomains() {
            domainsContainer.innerHTML = '';
            
            if (learningData.domains.length === 0) {
                domainsContainer.innerHTML = `
                    <div class="text-center py-8 opacity-75">
                        <i class="fas fa-book-open text-4xl mb-4 text-primary-500"></i>
                        <p class="text-lg">No domains added yet. Start by adding your first learning domain!</p>
                    </div>
                `;
                return;
            }
            
            learningData.domains.forEach(domain => {
                const domainEl = document.createElement('div');
                domainEl.className = 'domain-card rounded-xl p-4';
                domainEl.innerHTML = `
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="text-xl font-semibold" style="color: ${domain.color}">${domain.name}</h3>
                        <button class="remove-domain text-red-400 hover:text-red-300 transition-colors" data-id="${domain.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <div class="flex flex-wrap gap-2">
                        ${['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']
                            .map(day => `
                                <button class="day-toggle px-3 py-1 rounded-full text-sm transition-all ${isDomainScheduled(domain.id, day) ? 'glow text-white' : 'bg-dark-700 hover:bg-dark-600 text-dark-300'}" 
                                        data-domain="${domain.id}" data-day="${day}" style="${isDomainScheduled(domain.id, day) ? `background-color: ${domain.color}` : ''}">
                                    ${day.substring(0, 3)}
                                </button>
                            `).join('')}
                    </div>
                `;
                
                domainsContainer.appendChild(domainEl);
            });
            
            // Add event listeners for day toggles
            document.querySelectorAll('.day-toggle').forEach(button => {
                button.addEventListener('click', function() {
                    const domainId = parseInt(this.getAttribute('data-domain'));
                    const day = this.getAttribute('data-day');
                    toggleDomainDay(domainId, day);
                });
            });
            
            // Add event listeners for remove buttons
            document.querySelectorAll('.remove-domain').forEach(button => {
                button.addEventListener('click', function() {
                    const domainId = parseInt(this.getAttribute('data-id'));
                    removeDomain(domainId);
                });
            });
        }

        function renderTodayProgress() {
            const today = getCurrentDay();
            todayProgress.innerHTML = '';
            
            const todayDomains = learningData.schedule[today] || [];
            
            if (todayDomains.length === 0) {
                todayProgress.innerHTML = `
                    <div class="text-center py-4 opacity-75">
                        <i class="fas fa-coffee text-2xl mb-2 text-primary-500"></i>
                        <p>No domains scheduled for today. Enjoy your day off!</p>
                    </div>`;
                return;
            }
            
            todayDomains.forEach(domainId => {
                const domain = learningData.domains.find(d => d.id === domainId);
                if (!domain) return;
                
                const isCompleted = isDomainCompletedToday(domainId);
                
                const domainEl = document.createElement('div');
                domainEl.className = `flex items-center justify-between p-3 rounded-lg ${isCompleted ? 'bg-green-900/20 border border-green-800/50' : 'bg-dark-800/50 border border-dark-700'}`;
                domainEl.innerHTML = `
                    <div class="flex items-center">
                        <div class="w-3 h-3 rounded-full mr-3" style="background-color: ${domain.color}"></div>
                        <span class="font-medium">${domain.name}</span>
                    </div>
                    <button class="complete-toggle px-3 py-1 rounded-lg transition-all flex items-center gap-2 ${isCompleted ? 'bg-green-700 hover:bg-green-600' : 'bg-dark-700 hover:bg-dark-600'}" 
                            data-domain="${domain.id}">
                        ${isCompleted ? '<i class="fas fa-check"></i> Completed' : '<i class="far fa-circle"></i> Mark Complete'}
                    </button>
                `;
                
                todayProgress.appendChild(domainEl);
            });
            
            // Add event listeners for completion toggles
            document.querySelectorAll('.complete-toggle').forEach(button => {
                button.addEventListener('click', function() {
                    const domainId = parseInt(this.getAttribute('data-domain'));
                    toggleDomainCompletion(domainId);
                });
            });
        }

        // Domain scheduling and completion
        function isDomainScheduled(domainId, day) {
            return learningData.schedule[day] && learningData.schedule[day].includes(domainId);
        }

        function toggleDomainDay(domainId, day) {
            if (!learningData.schedule[day]) {
                learningData.schedule[day] = [];
            }
            
            const index = learningData.schedule[day].indexOf(domainId);
            if (index === -1) {
                learningData.schedule[day].push(domainId);
            } else {
                learningData.schedule[day].splice(index, 1);
            }
            
            saveData();
            renderDomains();
            renderTodayProgress();
        }

        function isDomainCompletedToday(domainId) {
            const today = new Date().toDateString();
            return learningData.completions.some(
                completion => completion.domainId === domainId && completion.date === today
            );
        }

        function toggleDomainCompletion(domainId) {
            const today = new Date().toDateString();
            const existingIndex = learningData.completions.findIndex(
                completion => completion.domainId === domainId && completion.date === today
            );
            
            if (existingIndex === -1) {
                learningData.completions.push({
                    domainId: domainId,
                    date: today,
                    timestamp: new Date().toISOString()
                });
            } else {
                learningData.completions.splice(existingIndex, 1);
            }
            
            saveData();
            renderTodayProgress();
            initializeCharts();
        }

        function resetWeek() {
            if (confirm('Are you sure you want to reset this week\'s progress? This cannot be undone.')) {
                resetWeekData();
                saveData();
                renderTodayProgress();
                initializeCharts();
            }
        }

        // Charts initialization and updates
        function initializeCharts() {
            updateWeeklyChart();
            updateMonthlyChart();
            updateYearlyChart();
        }

        function updateWeeklyChart() {
            const ctx = document.getElementById('weekly-chart').getContext('2d');
            
            if (weeklyChart) {
                weeklyChart.destroy();
            }
            
            const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
            const completedCounts = days.map(day => {
                const dayDomains = learningData.schedule[day] || [];
                return dayDomains.filter(domainId => isDomainCompletedOnDay(domainId, day)).length;
            });
            
            const scheduledCounts = days.map(day => {
                return learningData.schedule[day] ? learningData.schedule[day].length : 0;
            });
            
            weeklyChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: days.map(day => day.substring(0, 3)),
                    datasets: [
                        {
                            label: 'Scheduled',
                            data: scheduledCounts,
                            backgroundColor: 'rgba(59, 130, 246, 0.5)',
                            borderColor: 'rgb(59, 130, 246)',
                            borderWidth: 1
                        },
                        {
                            label: 'Completed',
                            data: completedCounts,
                            backgroundColor: 'rgba(16, 185, 129, 0.7)',
                            borderColor: 'rgb(16, 185, 129)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            }
                        }
                    }
                }
            });
        }

        function updateMonthlyChart() {
            const ctx = document.getElementById('monthly-chart').getContext('2d');
            
            if (monthlyChart) {
                monthlyChart.destroy();
            }
            
            const now = new Date();
            const daysInMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
            const monthDays = Array.from({length: daysInMonth}, (_, i) => i + 1);
            
            const completedByDay = monthDays.map(day => {
                const dateStr = new Date(now.getFullYear(), now.getMonth(), day).toDateString();
                return learningData.completions.filter(completion => completion.date === dateStr).length;
            });
            
            monthlyChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: monthDays,
                    datasets: [{
                        label: 'Daily Completions',
                        data: completedByDay,
                        borderColor: 'rgb(139, 92, 246)',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            }
                        }
                    }
                }
            });
        }

        function updateYearlyChart() {
            const ctx = document.getElementById('yearly-chart').getContext('2d');
            
            if (yearlyChart) {
                yearlyChart.destroy();
            }
            
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const now = new Date();
            const currentYear = now.getFullYear();
            
            const monthlyCompletions = months.map((_, index) => {
                const startDate = new Date(currentYear, index, 1).toDateString();
                const endDate = new Date(currentYear, index + 1, 0).toDateString();
                
                return learningData.completions.filter(completion => {
                    const compDate = new Date(completion.date);
                    return compDate >= new Date(startDate) && compDate <= new Date(endDate);
                }).length;
            });
            
            yearlyChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'Monthly Completions',
                        data: monthlyCompletions,
                        backgroundColor: 'rgba(245, 158, 11, 0.7)',
                        borderColor: 'rgb(245, 158, 11)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: 'rgba(255, 255, 255, 0.7)'
                            }
                        }
                    }
                }
            });
        }

        function isDomainCompletedOnDay(domainId, day) {
            // For simplicity, we're checking if the domain was completed today
            // In a more advanced version, we would check completion for specific days
            return isDomainCompletedToday(domainId);
        }
    </script>
</body>
</html>
